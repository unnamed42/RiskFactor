# 编写规则与数据规则
# 通用：（如果某type的规则与此重叠，以type的规则为准）
#    type: 问题的类型，如果为空则代表这是个选项
#    label: 问题的标签。具有type的问题，标签是渲染出来的标题；type为空的问题，标签是选项的值
#    required: 表示该项必填
#    description: 表示问题的详细描述，可放在问题下方做详细说明
#    placeholder: 输入类控件的占位文字
#    filterKey: 用于下拉选择类的选项，在下拉选择问题上设置则代表启用“输入时筛选选项”功能，在选项上设置则代表此选项的筛选用key
#               “输入时筛选选项”的含义是，筛选出所有 key.startsWith(input) 的选项
#    selected: 用于指定多选类问题（下拉选择，多项单/多选）的初始值，为 string （针对单项选择类）或者以`,`分隔的string（多项选择类）
#    isEnabler: 用于指定联动性，如果该问题被填写了内容，那么渲染出其 list 下的内容作为联动问题
#               type为空的也可以设置 isEnabler，代表如果选中这个选项那么联动它的list
# 数据采集：
#    指前端提交给后端的数据格式。所有的问题提交过来都应当是 string 类型的数据，其实际含义根据 type 来解析
#    整个表单提交过来应当是如下格式的内容：{ [问题的id]: [问题收集到的string], ... }
# type: header
#   用来将下属问题组织成一个整体的对象，只在逻辑上有用，不参与渲染，也不影响数据收集，只影响导入/导出格式
# type: list
#   该项按照list属性中的设置，按顺序渲染出各个控件。下属的控件不再自行采集数据提交，全部采集到 list 问题当中统一处理
#   在收集数据时，其数据格式为JSON，内容为（一个Object）：{ [问题在list中的index]: [问题收集到的string], ... }
#     设置为 (index -> 内容) 的映射而非数组，是为了允许list中某个问题没有答案
# type: template
#   该项为可重复添加的问题。根据重复添加的次数，渲染[次数]遍list。同样，下属问题不会自行收集数据
#   在收集数据时，其数据格式为JSON，内容为（一个Array<Object>）：[ list-0数据, list-1数据, ... ]
# type: disabled
#   该项被渲染为input控件，且状态为disabled。该组件意为其值应当是从后端获取，或者是利用其他域的值计算得到
#   该类问题不收集数据
# type: text | number
#   该项被渲染为input控件，text类型可随意输入；number类型只能输入合法的数字（[负号][整数部分][小数点][小数部分]）
#   该类问题收集到的数据为input控件的内容，即一个 string
# type: date
#   该项被渲染为datepicker，在本项目中，所有的日期均是年月日选择器（没有单独选择月或者选择年的情况）
#   该类问题收集到的数据为 yyyy-MM-dd 格式的string
# type: select
#   该项被渲染为单项下拉菜单选择。单选的下属选项不允许设置 isEnabler
#   该类问题收集到的数据为 string，即为选项的label
# type: choice
#   该类问题被渲染为多项单选（Radio）。选项可以设置 isEnabler，表示该选项被选中时联动list，其值为其作为 list 类型问题收集到的数据
#   该类问题收集到的数据为 string，即为选项的label或者收集到的数据
# type: either
#   该类问题被渲染成
- name: 胆胰危险因素采集
  center: users
  mtime: 2019-10-29
  list:
    - label: 基本信息
      type: header
      list:
        - label: 一般资料
          type: header
          list:
            - label: 中心编号
              type: disabled
            - label: 研究编号
              type: text
            - label: 出生日期
              type: date
              required: true
            - label: 性别
              type: select
              required: true
              placeholder: 性别
              list:
                - label: 男
                - label: 女
            - label: 民族
              type: select
              required: true
              placeholder: 输入拼音可筛选
              filterKey: key
              list:
                - label: 汉族
                  filterKey: han
                - label: 满族
                  filterKey: man
                - label: 蒙古族
                  filterKey: menggu
                - label: 回族
                  filterKey: hui
                - label: 藏族
                  filterKey: zang
                - label: 维吾尔族
                  filterKey: weiwuer
                - label: 苗族
                  filterKey: miao
                - label: 彝族
                  filterKey: yi
                - label: 壮族
                  filterKey: zhuang
                - label: 布依族
                  filterKey: buyi
                - label: 侗族
                  filterKey: dong
                - label: 瑶族
                  filterKey: yao
                - label: 白族
                  filterKey: bai
                - label: 土家族
                  filterKey: tujia
                - label: 哈尼族
                  filterKey: hani
                - label: 哈萨克族
                  filterKey: hasake
                - label: 傣族
                  filterKey: dai
                - label: 黎族
                  filterKey: li
                - label: 傈僳族
                  filterKey: lisu
                - label: 佤族
                  filterKey: wa
                - label: 畲族
                  filterKey: she
                - label: 高山族
                  filterKey: gaoshan
                - label: 拉祜族
                  filterKey: lahu
                - label: 水族
                  filterKey: shui
                - label: 东乡族
                  filterKey: dongxiang
                - label: 纳西族
                  filterKey: naxi
                - label: 景颇族
                  filterKey: jingpo
                - label: 柯尔克孜族
                  filterKey: keerkezi
                - label: 土族
                  filterKey: tu
                - label: 达斡尔族
                  filterKey: dawoer
                - label: 仫佬族
                  filterKey: mulao
                - label: 羌族
                  filterKey: qiang
                - label: 布朗族
                  filterKey: bulang
                - label: 撒拉族
                  filterKey: sala
                - label: 毛南族
                  filterKey: maonan
                - label: 仡佬族
                  filterKey: gelao
                - label: 锡伯族
                  filterKey: xibo
                - label: 阿昌族
                  filterKey: achang
                - label: 普米族
                  filterKey: pumi
                - label: 朝鲜族
                  filterKey: chaoxian
                - label: 塔吉克族
                  filterKey: tajike
                - label: 怒族
                  filterKey: nu
                - label: 乌孜别克族
                  filterKey: wuzibieke
                - label: 俄罗斯族
                  filterKey: eluosi
                - label: 鄂温克族
                  filterKey: ewenke
                - label: 德昂族
                  filterKey: deang
                - label: 保安族
                  filterKey: baoan
                - label: 裕固族
                  filterKey: yugu
                - label: 京族
                  filterKey: jing
                - label: 塔塔尔族
                  filterKey: tataer
                - label: 独龙族
                  filterKey: dulong
                - label: 鄂伦春族
                  filterKey: elunchun
                - label: 赫哲族
                  filterKey: hezhe
                - label: 门巴族
                  filterKey: menba
                - label: 珞巴族
                  filterKey: luoba
                - label: 基诺族
                  filterKey: jinuo
            - label: 籍贯
              type: list
              list:
                - label: 省
                  type: text
                  required: true
                - label: 市
                  type: text
                  required: true
            - label: 职业
              type: select
              required: true
              list:
                - label: 退（离）休人员
                - label: 国家公务员
                - label: 专业技术人员
                - label: 职员
                - label: 企业管理人员
                - label: 工人
                - label: 农民
                - label: 学生
                - label: 现役军人
                - label: 自由职业者
                - label: 无业人员
                - label: 其他
            - label: 通讯地址
              type: list
              list:
                - label: 省
                  type: text
                  required: true
                - label: 市
                  type: text
                  required: true
                - label: 县
                  type: text
                  required: true
            - label: 身高（m）
              type: number
              required: true
              placeholder: 身高
            - label: 体重（Kg）
              type: number
              required: true
              placeholder: 体重
        - label: 现病史
          type: header
          list:
            - label: 就诊或入院日期
              type: date
              required: true
            - label: 发病时间
              type: date
              required: true
              description: 精确到年，月份或日期未知用1月1日代替
            - label: 就诊症状
              type: choice-multi
              list:
                - label: 腹痛
                  list:
                    - label: 持续时间
                      type: number
                      required: true
                      list:
                        - type: select
                          addonPosition: postfix
                          selected: 天
                          list:
                            - label: 天
                            - label: 月
                            - label: 年
                - label: 腹胀
                  list:
                    - label: 持续时间
                      type: number
                      required: true
                      list:
                        - type: select
                          addonPosition: postfix
                          selected: 天
                          list:
                            - label: 天
                            - label: 月
                            - label: 年
                - label: 黄疸
                  list:
                    - label: 持续时间
                      type: number
                      required: true
                      list:
                        - type: select
                          addonPosition: postfix
                          selected: 天
                          list:
                            - label: 天
                            - label: 月
                            - label: 年
                - label: 恶心呕吐
                  list:
                    - label: 持续时间
                      type: number
                      required: true
                      list:
                        - type: select
                          addonPosition: postfix
                          selected: 天
                          list:
                            - label: 天
                            - label: 月
                            - label: 年
                - label: 乏力纳差
                  list:
                    - label: 持续时间
                      type: number
                      required: true
                      list:
                        - type: select
                          addonPosition: postfix
                          selected: 天
                          list:
                            - label: 天
                            - label: 月
                            - label: 年
                - label: 消瘦
                  list:
                    - label: 持续时间
                      type: number
                      required: true
                      list:
                        - type: select
                          addonPosition: postfix
                          selected: 天
                          list:
                            - label: 天
                            - label: 月
                            - label: 年
                - label: 发热
                  list:
                    - label: 持续时间
                      type: number
                      required: true
                      list:
                        - type: select
                          addonPosition: postfix
                          selected: 天
                          list:
                            - label: 天
                            - label: 月
                            - label: 年
                - label: 其他
                  list:
                    - type: text
                      required: true
                      placeholder: 症状名称
                    - label: 持续时间
                      type: number
                      required: true
                      list:
                        - type: select
                          addonPosition: postfix
                          selected: 天
                          list:
                            - label: 天
                            - label: 月
                            - label: 年
            - label: 入院体征
              type: choice-multi
              list:
                - label: 腹部包块
                - label: 黄疸
                - label: Murphy征
                - label: 肝大
                - label: 上腹压痛
                - label: 腹水
                - label: 心率不齐
                - label: 发热
                - label: 其他
                  list:
                    - type: text
                      required: true
                      placeholder: 症状名称
        - label: 既往病史
          type: header
          list:
            - label: 胆囊炎
              type: either
              yesno: 有/无
              list:
                - type: choice
                  required: true
                  list:
                    - label: 急性
                    - label: 慢性
            - label: 胆囊结石
              type: either
              yesno: 有/无
              list:
                - type: either
                  required: true
                  placeholder: 急性/慢性
                  yesno: 急性/慢性
                - label: 大小
                  type: number
                  required: true
                  yesno: 大小请填写二维值，单位：毫米
            - label: 胆囊息肉
              type: either
              yesno: 有/无
              list:
                - type: either
                  required: true
                  placeholder: 急性/慢性
                  yesno: 急性/慢性
                - label: 大小
                  type: number
                  required: true
                  yesno: 大小请填写二维值，单位：毫米
            - label: 胆管结石
              type: either
              yesno: 有/无
              list:
                - type: either
                  required: true
                  yesno: 肝内胆管结石/肝外胆管结石
            - label: Mirrizi综合征
              type: either
              yesno: 有/无
            - label: 胆道系统感染
              type: either
              yesno: 有/无
            - label: 寄生虫病
              type: either
              yesno: 有/无
              list:
                - type: choice-multi
                  required: true
                  list:
                    - label: 胆道蛔虫
                    - label: 华支睾吸虫
            - label: 胆胰管汇合异常
              type: either
              yesno: 有/无
            - label: 心脑血管疾病
              type: either
              yesno: 有/无
              list:
                - type: choice-multi
                  required: true
                  list:
                    - label: 高血压
                    - label: 糖尿病
                    - label: 其他
                      list:
                      - type: text
                        required: true
            - label: 手术史
              type: template
              list:
                - label: 手术时间
                  type: date
                  required: true
                  description: 精确到年，如月份和日期未知，用1月或1日代替
                - label: 手术名称
                  type: text
                  required: true
            - label: 其他
              type: template
              list:
                - label: 病症名称
                  type: text
                  required: true
        - label: 个人史
          type: header
          list:
            - label: 吸烟
              type: either
              list:
                - label: 支/天
                  type: number
                  required: true
                  labelPosition: postfix
                - label: 年
                  type: number
                  required: true
                  labelPosition: postfix
            - label: 饮酒
              type: either
              list:
                - label: 两/天
                  type: number
                  required: true
                  labelPosition: postfix
                - label: 年
                  type: number
                  required: true
                  labelPosition: postfix
            - label: 饮水
              type: choice-multi
              list:
                - label: 自来水
                - label: 井水
                - label: 河水
            - label: 饮食
              type: choice-multi
              list:
                - label: 高脂
                - label: 普通
                - label: 素食
            - label: BMI（体重/身高²）
              type: disabled
        - label: 家族史
          type: header
          list:
            - label: 肿瘤
              type: either
              yesno: 有/无
              list:
                - type: choice-multi
                  list:
                    - label: 胆囊癌
                    - label: 其他
                      type: text
            - label: 胆道疾病
              type: either
              yesno: 有/无
              list:
                - type: choice-multi
                  list:
                    - label: 胆囊结石
                    - label: 胆囊息肉
                    - label: 其他
                      type: text
            - label: 心血管疾病
              type: either
              yesno: 有/无
    - label: 术前情况
      type: header
      list:
        - label: 实验室检查
          type: header
          list:
            - label: 血常规
              type: list
              list:
                - label: 检查日期
                  type: date
                  description: 请填写入院第一次检查结果
                - type: table
                  list:
                    - type: list
                      list:
                        - label: 检测项
                        - label: 检测值
                        - label: 单位
                        - label: 临床意义判定
                    - type: list
                      list:
                        - label: 白细胞WBC
                        - type: number
                        - label: 10⁹/L
                        - type: choice
                          list:
                            - label: 1
                            - label: 2
                            - label: 3
                            - label: 4
                    - type: list
                      list:
                        - label: 中性粒细胞计数N
                        - type: number
                        - label: 10⁹/L
                        - type: choice
                          list:
                            - label: 1
                            - label: 2
                            - label: 3
                            - label: 4
                    - type: list
                      list:
                        - label: 中性粒细胞百分比N%
                        - type: number
                        - label: "%"
                        - type: choice
                          list:
                            - label: 1
                            - label: 2
                            - label: 3
                            - label: 4
                    - type: list
                      list:
                        - label: 淋巴细胞计数L
                        - type: number
                        - label: 10⁹/L
                        - type: choice
                          list:
                            - label: 1
                            - label: 2
                            - label: 3
                            - label: 4
                    - type: list
                      list:
                        - label: 淋巴细胞百分比L%
                        - type: number
                        - label: "%"
                        - type: choice
                          list:
                            - label: 1
                            - label: 2
                            - label: 3
                            - label: 4
                    - type: list
                      list:
                        - label: 单核细胞M
                        - type: number
                        - label: 10⁹/L
                        - type: choice
                          list:
                            - label: 1
                            - label: 2
                            - label: 3
                            - label: 4
                    - type: list
                      list:
                        - label: 红细胞RBC
                        - type: number
                        - label: 10¹²/L
                        - type: choice
                          list:
                            - label: 1
                            - label: 2
                            - label: 3
                            - label: 4
                    - type: list
                      list:
                        - label: 血红蛋白Hb
                        - type: number
                        - label: g/L
                        - type: choice
                          list:
                            - label: 1
                            - label: 2
                            - label: 3
                            - label: 4
                    - type: list
                      list:
                        - label: 血小板PLT
                        - type: number
                        - label: 10⁹/L
                        - type: choice
                          list:
                            - label: 1
                            - label: 2
                            - label: 3
                            - label: 4
            - label: 肝功能
              type: list
              list:
                - label: 检查日期
                  type: date
                  description: 请填写入院第一次检查结果
                - type: table
                  list:
                    - type: list
                      list:
                        - label: 检测项
                        - label: 检测值
                        - label: 单位
                        - label: 临床意义判定
                    - type: list
                      list:
                        - label: 谷丙转氨酶ALT
                        - type: number
                        - label: U/L
                        - type: choice
                          list:
                            - label: 1
                            - label: 2
                            - label: 3
                            - label: 4
                    - type: list
                      list:
                        - label: 谷草转氨酶AST
                        - type: number
                        - label: U/L
                        - type: choice
                          list:
                            - label: 1
                            - label: 2
                            - label: 3
                            - label: 4
                    - type: list
                      list:
                        - label: 碱性磷酸酶ALP
                        - type: number
                        - label: U/L
                        - type: choice
                          list:
                            - label: 1
                            - label: 2
                            - label: 3
                            - label: 4
                    - type: list
                      list:
                        - label: 总蛋白TP
                        - type: number
                        - label: g/L
                        - type: choice
                          list:
                            - label: 1
                            - label: 2
                            - label: 3
                            - label: 4
                    - type: list
                      list:
                        - label: 白蛋白ALB
                        - type: number
                        - label: g/L
                        - type: choice
                          list:
                            - label: 1
                            - label: 2
                            - label: 3
                            - label: 4
                    - type: list
                      list:
                        - label: 球蛋白GLO
                        - type: number
                        - label: g/L
                        - type: choice
                          list:
                            - label: 1
                            - label: 2
                            - label: 3
                            - label: 4
                    - type: list
                      list:
                        - label: 总胆红素TB
                        - type: number
                        - label: μmol/L
                        - type: choice
                          list:
                            - label: 1
                            - label: 2
                            - label: 3
                            - label: 4
                    - type: list
                      list:
                        - label: 直接胆红素DB
                        - type: number
                        - label: μmol/L
                        - type: choice
                          list:
                            - label: 1
                            - label: 2
                            - label: 3
                            - label: 4
                    - type: list
                      list:
                        - label: γ-谷氨酰转肽酶GGT
                        - type: number
                        - label: μmol/L
                        - type: choice
                          list:
                            - label: 1
                            - label: 2
                            - label: 3
                            - label: 4
            - label: 肿瘤标志物
              type: list
              list:
                - label: 检查日期
                  type: date
                  description: 请填写入院第一次检查结果
                - type: table
                  list:
                    - type: list
                      list:
                        - label: 检测项
                        - label: 检测值
                        - label: 单位
                        - label: 临床意义判定
                    - type: list
                      list:
                        - label: 癌胚抗原CEA
                        - type: number
                        - label: μg/L
                        - type: choice
                          list:
                            - label: 1
                            - label: 2
                            - label: 3
                            - label: 4
                    - type: list
                      list:
                        - label: 甲胎蛋白AFP
                        - type: number
                        - label: I U/mL
                        - type: choice
                          list:
                            - label: 1
                            - label: 2
                            - label: 3
                            - label: 4
                    - type: list
                      list:
                        - label: 癌胚抗原125
                        - type: number
                        - label: U/ml
                        - type: choice
                          list:
                            - label: 1
                            - label: 2
                            - label: 3
                            - label: 4
                    - type: list
                      list:
                        - label: 癌胚抗原19-9
                        - type: number
                        - label: U/ml
                        - type: choice
                          list:
                            - label: 1
                            - label: 2
                            - label: 3
                            - label: 4
            - label: 免疫学
              type: list
              list:
                - label: 检查日期
                  type: date
                  description: 请填写入院第一次检查结果
                - type: table
                  list:
                    - type: list
                      list:
                        - label: 检测项
                        - label: 检测值
                        - label: 单位
                        - label: 临床意义判定
                    - type: list
                      list:
                        - label: 乙肝表面抗原HBsAg
                        - type: number
                        - label: /
                        - type: choice
                          list:
                            - label: 1
                            - label: 2
                            - label: 3
                            - label: 4
                    - type: list
                      list:
                        - label: 乙肝表面抗体HBsAb
                        - type: number
                        - label: /
                        - type: choice
                          list:
                            - label: 1
                            - label: 2
                            - label: 3
                            - label: 4
                    - type: list
                      list:
                        - label: 乙肝e抗原HBeAg
                        - type: number
                        - label: /
                        - type: choice
                          list:
                            - label: 1
                            - label: 2
                            - label: 3
                            - label: 4
                    - type: list
                      list:
                        - label: 乙肝e抗体HbeAb
                        - type: number
                        - label: /
                        - type: choice
                          list:
                            - label: 1
                            - label: 2
                            - label: 3
                            - label: 4
                    - type: list
                      list:
                        - label: 乙肝核心抗原HBcAg
                        - type: number
                        - label: /
                        - type: choice
                          list:
                            - label: 1
                            - label: 2
                            - label: 3
                            - label: 4
                    - type: list
                      list:
                        - label: 丙肝抗体HCVAb
                        - type: number
                        - label: /
                        - type: choice
                          list:
                            - label: 1
                            - label: 2
                            - label: 3
                            - label: 4
        - label: 影像学检查
          type: header
          list:
            - label: B超
              type: either
              yesno: 有/无
              list:
                - label: 检查日期
                  type: date
                  required: true
                - type: template
                  list:
                    - label: 检查结果
                      type: text
                      required: true
            - label: CT
              type: either
              yesno: 有/无
              list:
                - label: 检查日期
                  type: date
                  required: true
                - type: template
                  list:
                    - label: 检查结果
                      type: text
                      required: true
            - label: MRI
              type: either
              yesno: 有/无
              list:
                - label: 检查日期
                  type: date
                  required: true
                - type: template
                  list:
                    - label: 检查结果
                      type: text
                      required: true
            - label: 经皮肝穿刺胆管造影（PTC）
              type: either
              yesno: 有/无
              list:
                - label: 检查日期
                  type: date
                  required: true
                - type: template
                  list:
                    - label: 检查结果
                      type: text
                      required: true
            - label: 超声内镜（EUS）
              type: either
              yesno: 有/无
              list:
                - label: 检查日期
                  type: date
                  required: true
                - type: template
                  list:
                    - label: 检查结果
                      type: text
                      required: true
            - label: PET/CT
              type: either
              yesno: 有/无
              list:
                - label: 检查日期
                  type: date
                  required: true
                - type: template
                  list:
                    - label: 检查结果
                      type: text
                      required: true
        - label: 术前诊断
          type: header
          list:
            - type: list
              list:
                - label: 术前诊断
                  type: text
                - label: 确诊方法
                  type: choice-multi
                  list:
                    - label: 细胞学诊断
                    - label: 基因学诊断
                    - label: 其他
                      list:
                        - type: text
                          required: true
            - label: 术前减黄
              type: either
              list:
                - label: 减黄方式
                  type: choice-multi
                  list:
                    - label: 经皮肝穿刺胆道引流（PTCD）
                    - label: 经内镜鼻胆管引流（ENBD）
                    - label: 胆道支架
                    - label: 胆囊造瘘
            - label: 合并症
              type: either
              yesno: 有/无
              list:
                - type: choice-multi
                  list:
                    - label: 肺心病
                    - label: 高血压
                    - label: 心绞痛
                    - label: 糖尿病
                    - label: 肝癌
                    - label: 胰腺癌
                    - label: 胆管癌
                    - label: 其他
                      list:
                        - type: text
    - label: 随访情况
      type: header
      list:
        - label: 就诊号/住院号
          type: text
        - label: 随访时间
          type: date
          isEnabler: true
          list:
            - label: 随访结果
- name: 项目一
  center: users
  mtime: 2019-11-12
- name: 项目二
  center: users
  mtime: 2019-11-12
