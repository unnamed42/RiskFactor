# 编写规则：
# type === MULTI_CHOICE
#     此类问题下允许某些选项为非CHOICE，但只允许TEXT类型
#     当某个选项为TEXT时，最终问题回复中被选项包含填写内容
#     该问题的回复为数组
# type === YESNO_CHOICE
#     当选为否时，回复内容为false
#     当选为是时，回复内容为true
#     当选为是，且enabler打开时，回复内容为所有子问题内容的集合（该表现类似于LIST）
#     当选为否，且enalber打开时，回复内容为null
# type === LIST
#     该问题的回复内容为 { (子问题field: 子问题内容)... }
# type === TEXT || NUMBER
#     内容为string
# type === LIST_APPENDABLE
#     该类问题的list为问题模板，应当视作一个LIST类型，子问题集为list的问题
#       为了简化设计，将这个LIST问题省去
#     回复内容为数组长度，0 or undefined
# type === DATE
#     内容为string, 格式yyyy-MM-dd
# type === MULTI_SELECT
#     内容为半角逗号分隔的字符串，每个区块是所选项目的label
# type === SINGLE_SELECT
#     内容为字符串，即所选项目的label
# type === IMMUTABLE
#     无回复，其内容为option.placeholder
name: 胆胰危险因素采集
center: users
mtime: 2019-10-29
sections:
  - title: 基本信息
    sections:
    - title: 一般资料
      questions:
        - label: 中心编号
          field: centerId
          type: IMMUTABLE
        - label: 研究编号
          field: surveyId
          type: IMMUTABLE
        - label: 出生日期
          field: birthday
          type: DATE
          option:
            required: true
        - label: 性别
          field: gender
          type: SINGLE_SELECT
          option:
            required: true
            placeholder: 性别
          list:
            - label: 男
            - label: 女
        - label: 民族
          field: ethnic
          type: SINGLE_SELECT
          option:
            required: true
            placeholder: 输入拼音可筛选
            filterKey: key
          list:
            - label: 汉族
              option:
                filterKey: han
            - label: 满族
              option:
                filterKey: man
            - label: 蒙古族
              option:
                filterKey: menggu
            - label: 回族
              option:
                filterKey: hui
            - label: 藏族
              option:
                filterKey: zang
            - label: 维吾尔族
              option:
                filterKey: weiwuer
            - label: 苗族
              option:
                filterKey: miao
            - label: 彝族
              option:
                filterKey: yi
            - label: 壮族
              option:
                filterKey: zhuang
            - label: 布依族
              option:
                filterKey: buyi
            - label: 侗族
              option:
                filterKey: dong
            - label: 瑶族
              option:
                filterKey: yao
            - label: 白族
              option:
                filterKey: bai
            - label: 土家族
              option:
                filterKey: tujia
            - label: 哈尼族
              option:
                filterKey: hani
            - label: 哈萨克族
              option:
                filterKey: hasake
            - label: 傣族
              option:
                filterKey: dai
            - label: 黎族
              option:
                filterKey: li
            - label: 傈僳族
              option:
                filterKey: lisu
            - label: 佤族
              option:
                filterKey: wa
            - label: 畲族
              option:
                filterKey: she
            - label: 高山族
              option:
                filterKey: gaoshan
            - label: 拉祜族
              option:
                filterKey: lahu
            - label: 水族
              option:
                filterKey: shui
            - label: 东乡族
              option:
                filterKey: dongxiang
            - label: 纳西族
              option:
                filterKey: naxi
            - label: 景颇族
              option:
                filterKey: jingpo
            - label: 柯尔克孜族
              option:
                filterKey: keerkezi
            - label: 土族
              option:
                filterKey: tu
            - label: 达斡尔族
              option:
                filterKey: dawoer
            - label: 仫佬族
              option:
                filterKey: mulao
            - label: 羌族
              option:
                filterKey: qiang
            - label: 布朗族
              option:
                filterKey: bulang
            - label: 撒拉族
              option:
                filterKey: sala
            - label: 毛南族
              option:
                filterKey: maonan
            - label: 仡佬族
              option:
                filterKey: gelao
            - label: 锡伯族
              option:
                filterKey: xibo
            - label: 阿昌族
              option:
                filterKey: achang
            - label: 普米族
              option:
                filterKey: pumi
            - label: 朝鲜族
              option:
                filterKey: chaoxian
            - label: 塔吉克族
              option:
                filterKey: tajike
            - label: 怒族
              option:
                filterKey: nu
            - label: 乌孜别克族
              option:
                filterKey: wuzibieke
            - label: 俄罗斯族
              option:
                filterKey: eluosi
            - label: 鄂温克族
              option:
                filterKey: ewenke
            - label: 德昂族
              option:
                filterKey: deang
            - label: 保安族
              option:
                filterKey: baoan
            - label: 裕固族
              option:
                filterKey: yugu
            - label: 京族
              option:
                filterKey: jing
            - label: 塔塔尔族
              option:
                filterKey: tataer
            - label: 独龙族
              option:
                filterKey: dulong
            - label: 鄂伦春族
              option:
                filterKey: elunchun
            - label: 赫哲族
              option:
                filterKey: hezhe
            - label: 门巴族
              option:
                filterKey: menba
            - label: 珞巴族
              option:
                filterKey: luoba
            - label: 基诺族
              option:
                filterKey: jinuo
        - label: 籍贯
          field: birth
          type: LIST
          list:
            - label: 省
              field: province
              type: TEXT
              option:
                required: true
            - label: 市
              field: city
              type: TEXT
              option:
                required: true
        - label: 职业
          field: job
          type: SINGLE_SELECT
          option:
            required: true
          list:
            - label: 退（离）休人员
            - label: 国家公务员
            - label: 专业技术人员
            - label: 职员
            - label: 企业管理人员
            - label: 工人
            - label: 农民
            - label: 学生
            - label: 现役军人
            - label: 自由职业者
            - label: 无业人员
            - label: 其他
        - label: 通讯地址
          field: address
          type: LIST
          list:
            - label: 省
              field: province
              type: TEXT
              option:
                required: true
            - label: 市
              field: city
              type: TEXT
              option:
                required: true
            - label: 县
              field: county
              type: TEXT
              option:
                required: true
        - label: 身高（米）
          field: height
          type: NUMBER
          option:
            required: true
            placeholder: 身高
        - label: 体重（千克）
          field: weight
          type: NUMBER
          option:
            required: true
            placeholder: 体重
    - title: 现病史
      questions:
        - label: 就诊或入院日期
          field: treatmentTime
          type: DATE
          option:
            required: true
        - label: 发病时间
          field: onsetTime
          type: DATE
          option:
            required: true
            detail: 精确到年，月份或日期未知用1月1日代替
        - label: 就诊症状
          field: symtoms
          type: MULTI_CHOICE
          list:
            - label: 腹痛
              field: 1
              option:
                enabler: true
              list:
                - label: 持续时间
                  field: duration
                  type: NUMBER
                  option:
                    required: true
                  list:
                    - field: unit
                      type: SINGLE_SELECT
                      option:
                        prefixPostfix: false
                        defaultSelected: 天
                      list:
                        - label: 天
                        - label: 月
                        - label: 年
            - label: 腹胀
              field: 2
              option:
                enabler: true
              list:
                - label: 持续时间
                  field: duration
                  type: NUMBER
                  option:
                    required: true
                  list:
                    - field: unit
                      type: SINGLE_SELECT
                      option:
                        prefixPostfix: false
                        defaultSelected: 天
                      list:
                        - label: 天
                        - label: 月
                        - label: 年
            - label: 黄疸
              field: 3
              option:
                enabler: true
              list:
                - label: 持续时间
                  field: duration
                  type: NUMBER
                  option:
                    required: true
                  list:
                    - field: unit
                      type: SINGLE_SELECT
                      option:
                        prefixPostfix: false
                        defaultSelected: 天
                      list:
                        - label: 天
                        - label: 月
                        - label: 年
            - label: 恶心呕吐
              field: 4
              option:
                enabler: true
              list:
                - label: 持续时间
                  field: duration
                  type: NUMBER
                  option:
                    required: true
                  list:
                    - field: unit
                      type: SINGLE_SELECT
                      option:
                        prefixPostfix: false
                        defaultSelected: 天
                      list:
                        - label: 天
                        - label: 月
                        - label: 年
            - label: 乏力纳差
              field: 5
              option:
                enabler: true
              list:
                - label: 持续时间
                  field: duration
                  type: NUMBER
                  option:
                    required: true
                  list:
                    - field: unit
                      type: SINGLE_SELECT
                      option:
                        prefixPostfix: false
                        defaultSelected: 天
                      list:
                        - label: 天
                        - label: 月
                        - label: 年
            - label: 消瘦
              field: 6
              option:
                enabler: true
              list:
                - label: 持续时间
                  field: duration
                  type: NUMBER
                  option:
                    required: true
                  list:
                    - field: unit
                      type: SINGLE_SELECT
                      option:
                        prefixPostfix: false
                        defaultSelected: 天
                      list:
                        - label: 天
                        - label: 月
                        - label: 年
            - label: 发热
              field: 7
              option:
                enabler: true
              list:
                - label: 持续时间
                  field: duration
                  type: NUMBER
                  option:
                    required: true
                  list:
                    - field: unit
                      type: SINGLE_SELECT
                      option:
                        prefixPostfix: false
                        defaultSelected: 天
                      list:
                        - label: 天
                        - label: 月
                        - label: 年
            - label: 其他
              field: 8
              option:
                enabler: true
              list:
                - field: name
                  type: TEXT
                  option:
                    required: true
                    placeholder: 症状名称
                - label: 持续时间
                  field: duration
                  type: NUMBER
                  option:
                    required: true
                  list:
                    - field: unit
                      type: SINGLE_SELECT
                      option:
                        prefixPostfix: false
                        defaultSelected: 天
                      list:
                        - label: 天
                        - label: 月
                        - label: 年
        - label: 入院体征
          field: treatmentSymptoms
          type: MULTI_CHOICE
          list:
            - label: 腹部包块
            - label: 黄疸
            - label: Murphy征
            - label: 肝大
            - label: 上腹压痛
            - label: 腹水
            - label: 心率不齐
            - label: 发热
            - label: 其他
              field: other
              list:
                - type: TEXT
                  field: name
                  option:
                    required: true
                    placeholder: 症状名称
    - title: 既往病史
      questions:
        - label: 胆囊炎
          field: cholecystitis
          type: YESNO_CHOICE
          option:
            detail: 有/无
            enabler: true
          list:
            - field: severity
              type: SINGLE_CHOICE
              option:
                required: true
              list:
                - label: 急性
                - label: 慢性
        - label: 胆囊结石
          field: gallstone
          type: YESNO_CHOICE
          option:
            detail: 有/无
            enabler: true
          list:
            - type: LIST
              list:
                - field: severity
                  type: YESNO_CHOICE
                  option:
                    required: true
                    placeholder: 急性/慢性
                    detail: 急性/慢性
                - field: size
                  label: 大小
                  type: NUMBER
                  option:
                    required: true
                    detail: 大小请填写二维值，单位：毫米
        - label: 胆囊息肉
          field: gallbladderPolyps
          type: YESNO_CHOICE
          option:
            detail: 有/无
            enabler: true
          list:
            - type: LIST
              list:
                - field: severity
                  type: YESNO_CHOICE
                  option:
                    required: true
                    placeholder: 急性/慢性
                    detail: 急性/慢性
                - field: size
                  label: 大小
                  type: NUMBER
                  option:
                    required: true
                    detail: 大小请填写二维值，单位：毫米
        - label: 胆管结石
          field: bileDuctStone
          type: YESNO_CHOICE
          option:
            detail: 有/无
            enabler: true
          list:
            - field: type
              type: YESNO_CHOICE
              option:
                required: true
                detail: 肝内胆管结石/肝外胆管结石
        - label: Mirrizi综合征
          field: mirrizi
          type: YESNO_CHOICE
          option:
            detail: 有/无
        - label: 胆道系统感染
          field: biliarySystemInfection
          type: YESNO_CHOICE
          option:
            detail: 有/无
        - label: 寄生虫病
          field: parasiticDisease
          type: YESNO_CHOICE
          option:
            detail: 有/无
            enabler: true
          list:
            - field: type
              type: MULTI_CHOICE
              option:
                required: true
              list:
                - label: 胆道蛔虫
                - label: 华支睾吸虫
        - label: 胆胰管汇合异常
          field: pancreaticobiliaryConfluence
          type: YESNO_CHOICE
          option:
            detail: 有/无
        - label: 心脑血管疾病
          field: cardiovascularDisease
          type: YESNO_CHOICE
          option:
            detail: 有/无
            enabler: true
          list:
            - field: types
              type: MULTI_CHOICE
              option:
                required: true
              list:
                - label: 高血压
                - label: 糖尿病
                - label: 其他
                  field: name
                  type: TEXT
                  option:
                    required: true
        - label: 手术史
          field: surgicalHistory
          type: LIST_APPENDABLE
          list:
            - label: 手术时间
              field: date
              type: DATE
              option:
                required: true
                detail: 精确到年，如月份和日期未知，用1月或1日代替
            - label: 手术名称
              field: name
              type: TEXT
              option:
                required: true
        - label: 其他
          field: other
          type: LIST_APPENDABLE
          list:
            - label: 病症名称
              field: name
              type: TEXT
              option:
                required: true
    - title: 个人史
      questions:
        - label: 吸烟
          field: smoking
          type: YESNO_CHOICE
          option:
            enabler: true
            detail: 是/否
          list:
            - label: 支/天
              type: NUMBER
              field: count
              option:
                required: true
            - label: 年
              type: NUMBER
              field: year
              option:
                required: true
        - label: 饮酒
          field: drinking
          type: YESNO_CHOICE
          option:
            enabler: true
            detail: 是/否
          list:
            - label: 两/天
              type: NUMBER
              field: count
              option:
                required: true
            - label: 年
              type: NUMBER
              field: year
              option:
                required: true
        - label: 饮水
          type: MULTI_CHOICE
          field: water
          list:
            - label: 自来水
            - label: 井水
            - label: 河水
        - label: 饮食
          type: MULTI_CHOICE
          field: meal
          list:
            - label: 高脂
            - label: 普通
            - label: 素食
        - label: BMI（体重/身高²）
          type: IMMUTABLE
          field: bmi
    - title: 家族史
      questions:
        - label: 肿瘤
          type: YESNO_CHOICE
          field: cancer
          option:
            enabler: true
            detail: 有/无
          list:
            - type: MULTI_CHOICE
              field: type
              list:
                - label: 胆囊癌
                - label: 其他
                  type: TEXT
                  field: other
        - label: 胆道疾病
          type: YESNO_CHOICE
          field: biliaryDisease
          option:
            enabler: true
            detail: 有/无
          list:
            - type: MULTI_CHOICE
              field: type
              list:
                - label: 胆囊结石
                - label: 胆囊息肉
                - label: 其他
                  type: TEXT
                  field: other
        - label: 心血管疾病
          type: YESNO_CHOICE
          field: cardiovascularDisease
          option:
            detail: 有/无
  - title: 术前情况
    sections:
    - title: 影像学检查
      questions:
        - label: B超
          field: ultrasound
          type: YESNO_CHOICE
          option:
            detail: 有/无
            enabler: true
          list:
            - type: LIST
              list:
                - label: 检查日期
                  type: DATE
                  field: date
                - type: LIST_APPENDABLE
                  list:
                    - label: 检查结果
                      type: TEXT
        - label: CT
          field: ct
          type: YESNO_CHOICE
          option:
            detail: 有/无
            enabler: true
          list:
            - type: LIST
              list:
                - label: 检查日期
                  type: DATE
                  field: date
                - type: LIST_APPENDABLE
                  list:
                    - label: 检查结果
                      type: TEXT
        - label: MRI
          field: mri
          type: YESNO_CHOICE
          option:
            detail: 有/无
            enabler: true
          list:
            - type: LIST
              list:
                - label: 检查日期
                  type: DATE
                  field: date
                - type: LIST_APPENDABLE
                  list:
                    - label: 检查结果
                      type: TEXT
        - label: 经皮肝穿刺胆管造影（PTC）
          field: ptc
          type: YESNO_CHOICE
          option:
            detail: 有/无
            enabler: true
          list:
            - type: LIST
              list:
                - label: 检查日期
                  type: DATE
                  field: date
                - type: LIST_APPENDABLE
                  list:
                    - label: 检查结果
                      type: TEXT
        - label: 超声内镜（EUS）
          field: eus
          type: YESNO_CHOICE
          option:
            detail: 有/无
            enabler: true
          list:
            - type: LIST
              list:
                - label: 检查日期
                  type: DATE
                  field: date
                - type: LIST_APPENDABLE
                  list:
                    - label: 检查结果
                      type: TEXT
        - label: PET/CT
          field: pet_ct
          type: YESNO_CHOICE
          option:
            detail: 有/无
            enabler: true
          list:
            - type: LIST
              list:
                - label: 检查日期
                  type: DATE
                  field: date
                - type: LIST_APPENDABLE
                  list:
                    - label: 检查结果
                      type: TEXT
    - title: 术前诊断
      questions:
        - type: LIST
          list:
            - label: 术前诊断
              field: preoperativeDiagnosis
              type: TEXT
            - label: 确诊方法
              field: method
              type: MULTI_CHOICE
              list:
                - label: 细胞学诊断
                - label: 基因学诊断
                - label: 其他
                  field: other
                  type: TEXT
        - label: 术前减黄
          type: YESNO_CHOICE
          field: preoperativeYellowing
          option:
            enabler: true
            detail: 是/否
          list:
            - label: 减黄方式
              field: method
              type: MULTI_CHOICE
              list:
                - label: 经皮肝穿刺胆道引流（PTCD）
                - label: 经内镜鼻胆管引流（ENBD）
                - label: 胆道支架
                - label: 胆囊造瘘
        - label: 合并症
          type: YESNO_CHOICE
          field: comorbidity
          option:
            enabler: true
            detail: 有/无
          list:
            - type: MULTI_CHOICE
              field: type
              list:
                - label: 肺心病
                - label: 高血压
                - label: 心绞痛
                - label: 糖尿病
                - label: 肝癌
                - label: 胰腺癌
                - label: 胆管癌
                - label: 其他
                  type: TEXT
                  field: other
  - title: 随访情况
    sections:
    - title: 随访情况
      questions:
        - label: 就诊号/住院号
          field: id
          type: TEXT
        - label: 随访时间
          type: DATE
          field: date
          option:
            enabler: true
